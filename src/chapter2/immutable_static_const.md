# Immutable, Static, และ Const ใน Rust

ใน Rust, การจัดการตัวแปรมีความหลากหลายและยืดหยุ่น การเข้าใจความแตกต่างระหว่างตัวแปรแบบ Immutable, Static, และ Const เป็นสิ่งสำคัญในการพัฒนาโปรแกรมที่มีประสิทธิภาพและปลอดภัย นอกจากนี้เราจะเปรียบเทียบการใช้งานเหล่านี้กับภาษาการเขียนโปรแกรมอื่นๆ เช่น C++ และ Java

## Immutable

โดยค่าเริ่มต้น ตัวแปรใน Rust จะเป็นแบบ Immutable ซึ่งหมายความว่าเมื่อกำหนดค่าให้ตัวแปรแล้วจะไม่สามารถเปลี่ยนแปลงค่าได้ การใช้ตัวแปรแบบ Immutable ช่วยให้โค้ดมีความชัดเจนและปลอดภัยมากขึ้น เนื่องจากเรามั่นใจได้ว่าค่าของตัวแปรจะไม่ถูกเปลี่ยนแปลงโดยไม่ตั้งใจ

### ตัวอย่างการใช้งาน

```rust
fn main() {
    let x = 5;
    println!("The value of x is: {}", x);
    x = 6; // Error: cannot assign twice to immutable variable
}
```
ในตัวอย่างนี้ ตัวแปร x ถูกประกาศเป็น Immutable ดังนั้นเมื่อพยายามเปลี่ยนค่าของ x จะเกิดข้อผิดพลาด

## Const
ค่าคงที่ (Const) ใน Rust เป็นค่าที่ไม่สามารถเปลี่ยนแปลงได้และมีอายุการใช้งานตลอดอายุโปรแกรม การประกาศค่าคงที่ใช้คำสั่ง const และต้องระบุชนิดข้อมูลเสมอ
```Rust
const MAX_POINTS: u32 = 100_000;
```
ในตัวอย่างนี้ เราประกาศค่าคงที่ MAX_POINTS เป็นชนิด u32 และกำหนดค่าให้เป็น 100,000 ค่าคงที่นี้จะถูกฝังลงในโค้ดและไม่สามารถเปลี่ยนแปลงได้

## การเปรียบเทียบกับภาษาอื่น
C++: การใช้ const ใน C++ คล้ายกับใน Rust โดยการประกาศค่าคงที่ที่ไม่สามารถเปลี่ยนแปลงได้
Java: ใน Java การใช้ final เพื่อประกาศค่าคงที่ที่ไม่สามารถเปลี่ยนแปลงได้

## Static
ตัวแปรแบบ Static ใน Rust มีความคล้ายคลึงกับค่าคงที่ แต่มีข้อแตกต่างสำคัญคือค่าของตัวแปรแบบ Static จะถูกเก็บในหน่วยความจำ Static ซึ่งสามารถแชร์ระหว่างหลายส่วนของโปรแกรมได้ นอกจากนี้ตัวแปรแบบ Static สามารถเป็น Mutable ได้ถ้ากำหนดเป็น static mut

```Rust
static MAX_POINTS: u32 = 100_000;

fn main() {
    println!("The value of MAX_POINTS is: {}", MAX_POINTS);
}
```

## ตัวอย่างการใช้งานแบบ Mutable
```Rust
static mut COUNTER: u32 = 0;

fn main() {
    unsafe {
        COUNTER += 1;
        println!("Counter: {}", COUNTER);
    }
}
```
ในตัวอย่างนี้ เราใช้ static mut เพื่อประกาศตัวแปร COUNTER ที่สามารถเปลี่ยนแปลงค่าได้ และใช้บล็อก unsafe เพื่อทำการเปลี่ยนแปลงค่า

## การเปรียบเทียบกับภาษาอื่น
C++: การใช้ static ใน C++ คล้ายกับใน Rust โดยการประกาศตัวแปรที่มีอายุการใช้งานตลอดโปรแกรม
Java: การใช้ static ใน Java เพื่อประกาศตัวแปรที่สามารถแชร์ระหว่างคลาสได้

## ความแตกต่างหลัก

1 Immutable vs Const vs Static:
Immutable: ตัวแปรที่ไม่สามารถเปลี่ยนแปลงค่าได้หลังจากการกำหนดค่า สามารถมีอายุการใช้งานตามช่วงของสโคปที่ประกาศ
Const: ค่าคงที่ที่ไม่สามารถเปลี่ยนแปลงได้และถูกฝังลงในโค้ด มีอายุการใช้งานตลอดโปรแกรม
Static: ตัวแปรที่มีอายุการใช้งานตลอดโปรแกรม สามารถเข้าถึงได้จากทุกที่ในโปรแกรม และสามารถเป็น Mutable ได้ด้วย static mut

2 การใช้งาน:
Immutable: ใช้สำหรับตัวแปรที่ต้องการความปลอดภัยและไม่ต้องการเปลี่ยนแปลงค่า
Const: ใช้สำหรับค่าคงที่ที่ต้องการประสิทธิภาพสูงและไม่ต้องการเปลี่ยนแปลง
Static: ใช้สำหรับตัวแปรที่ต้องการแชร์ระหว่างหลายส่วนของโปรแกรมและต้องการเก็บในหน่วยความจำ Static

สรุป
การเลือกใช้ตัวแปรแบบ Immutable, Const, และ Static ขึ้นอยู่กับความต้องการและลักษณะของโปรแกรม การใช้ตัวแปรแบบ Immutable ช่วยให้โค้ดมีความปลอดภัยและชัดเจน การใช้ค่าคงที่ (Const) ช่วยให้โปรแกรมมีประสิทธิภาพ และการใช้ตัวแปรแบบ Static ช่วยให้สามารถแชร์ข้อมูลระหว่างหลายส่วนของโปรแกรมได้ การเข้าใจความแตกต่างเหล่านี้จะช่วยให้เราพัฒนาโปรแกรมใน Rust ได้อย่างมีประสิทธิภาพและปลอดภัยมากยิ่งขึ้น

แหล่งข้อมูลเพิ่มเติม:
The Rust Programming Language - Constants and Statics
[Mozilla, "Rust Performance and Safety Comparison", 2020]